generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model Patient {
  id           String        @id @default(uuid())
  firstName    String
  lastName     String
  addresses    Address[]
  dateOfBirth  DateTime
  email        String?
  documentIds  DocumentId[]
  phoneNumbers PhoneNumber[]
  created_at   DateTime      @default(now())
  updated_at   DateTime      @updatedAt

  @@map("patients")
}

model Address {
  id        String  @id @default(uuid())
  city      String
  state     String
  street    String
  zipCode   String
  patient   Patient @relation(fields: [patientId], references: [id], onDelete: Cascade)
  patientId String

  @@map("addresses")
}

model DocumentId {
  id        String  @id @default(uuid())
  number    String  @unique
  type      String
  patient   Patient @relation(fields: [patientId], references: [id], onDelete: Cascade)
  patientId String

  @@map("documentIds")
}

model PhoneNumber {
  id        String  @id @default(uuid())
  number    String
  type      String
  patient   Patient @relation(fields: [patientId], references: [id], onDelete: Cascade)
  patientId String

  @@map("phoneNumbers")
}

model Log {
  id           String   @id @default(uuid())
  requestTime  DateTime
  responseTime DateTime
  method       String
  url          String
  statusCode   Int
  userAgent    String?
  body         Json
  params       Json
  query        Json

  @@map("logs")
}
